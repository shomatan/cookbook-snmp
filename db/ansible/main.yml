# This should be your Ansible playbooks to provision your containers.
# An inventory will be automatically created using the names of the services
# from your container.yml file.
# Add any roles or other modules you'll need to this directory too.
# For many examples of roles, check out Ansible Galaxy: https://galaxy.ansible.com/
#
---
- hosts: db
  roles:
    - role: shomatan.mariadb
  vars:
    - wp_mysql_db: wordpress
    - wp_mysql_user: wordpress
    - wp_mysql_password: password
  tasks:
    - name: Create mysql database
      mysql_db:
        name: "{{ wp_mysql_db }}"
        state: present

    - name: Create mysql user
      mysql_user:
        name: "{{ wp_mysql_user }}"
        password: "{{ wp_mysql_password }}"
        state: present
        priv: "*.*:ALL,GRANT"
        host: "%"
